{% extends 'orders/order_base.html' %}
{% load static %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'orders/css/forms.css' %}"/>
    <link rel="stylesheet" href="{% static 'tosti/css/index.css' %}"/>
    <link rel="stylesheet" href="{% static 'orders/css/item-list-admin.css' %}"/>
{% endblock %}

{% block order_content %}
    <div class="container-sm">
        <div class="btn-ml btn-on bg-primary border-0 text-center" onclick="window.location.href = '{% url "orders:shift_overview" shift=shift %}';">
            <h5>Order overview</h5>
            <i class="fas fa-users"></i>
        </div>
    </div>
    <div class="container-sm">
        <p id="message-success" class="alert alert-success" style="display: none;"></p>
        <p id="message-error" class="alert alert-danger" style="display: none;"></p>
    </div>
    <div class="container-sm">
        <h1>Orders</h1>
        <div id="item-orders">
        </div>
    </div>
{% endblock %}

{% block footer %}
    <footer class="page-footer navbar navbar-expand-md fixed-bottom">
        <div class="container text-center">
            <div class="row flex-grow-1">
                <div class="col">
                    <div class="btn-ml m-auto cursor-pointer {% if shift.can_order %}bg-success{% else %}bg-danger{% endif %}" onclick="toggle_shift_activation(this);">
                        <i class="far fa-hand-paper"></i>
                    </div>
                </div>
                <div class="col">
                    <div class="btn-ml btn-on m-auto" onclick="add_time();">
                        <i class="far fa-clock"></i>
                    </div>
                </div>
                <div class="col">
                    <div class="btn-ml btn-on m-auto" onclick="add_capacity();">
                        <i class="fas fa-plus"></i>
                    </div>
                </div>
            </div>
        </div>
    </footer>
{% endblock %}

{% block js %}
    <script>
        const ITEM_CONTAINER = document.getElementById('item-orders');
        const ORDER_URL = "{% url 'orders:shift_status' shift=shift %}";
        const CSRF_TOKEN = "{{ csrf_token }}";
        const ORDER_UPDATE_URL = "{% url 'orders:order_update' %}";
        const ERROR_CONTAINER = document.getElementById('message-error');
    </script>
    <script>
        const SUCCESS_CONTAINER = document.getElementById('message-success');
        const TOGGLE_SHIFT_URL = "{% url 'orders:shift_toggle' shift=shift %}";
        const ADD_TIME_URL = "{% url 'orders:shift_add_time' shift=shift %}";
        const ADD_CAPACITY_URL = "{% url 'orders:shift_add_capacity' shift=shift %}";
    </script>
    <script src="{% static 'orders/js/asynch-update-orders-admin.js' %}"></script>
    <script src="{% static 'orders/js/asynch-alter-shift-state.js' %}"></script>
{% endblock %}